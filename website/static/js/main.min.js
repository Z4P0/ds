"use strict";var ds={};window.addEventListener("load",function(){if(localStorage.getItem("ds")===null){console.log("no localStorage");var a={loggedIn:false};localStorage.setItem("ds",JSON.stringify(a));console.log("localStorage set")}ds.localStorage=JSON.parse(localStorage.getItem("ds"));if($("#all-topics-wrapper").length){$("#all-topics-wrapper").toggle();$("#all-topics-toggle").on("click",function(){$(this).toggleClass("show-collapse");$("#all-topics-wrapper").toggle()})}if($("#league-overview").length){ds.league_overview.init();ds.league_nav.init({menu:$("#league-menu-options")})}ds.height=$(document).height();ds.width=$(document).width();ds.nav.init({nav:"#nav-menu",toggle:"#nav-toggle",search:"#search-li"})});ds.league_nav=(function(){var g=[],a,e=0,d=$("html, body");var f=function(i){c(i.menu);h()};var c=function(i){a=i;a.on("click",function(j){if(j.target.localName==="a"){j.preventDefault();h(j.target)}});g=$.makeArray(a.find("a"))};var b=function(i){d.animate({scrollTop:$(i).offset().top},1000,function(){window.location.hash=i})};var h=function(k){a.find(".current").removeClass("current");if(k){for(var j=0;j<g.length;j++){if(g[j].attributes.href.nodeValue.split("#")[1]===k.attributes.href.nodeValue.split("#")[1]){e=j}}b(g[e].attributes.href.nodeValue)}$(g[e]).addClass("current")};return{init:f}})();ds.league_overview=(function(){var e,k,m={},l,o,i,a,h=[];var n=function(){e=$("#league-overview");k=$.makeArray(e.children(".league-clubs").children());m.name=e.attr("data-current-club");l=$.makeArray(e.find("#stadium-overviews").children().children());o=e.find(".league-table");i=$.makeArray(o.children("tbody").children());for(var p=0;p<l.length;p++){var q=$(l[p]).find(".stadium");h.push({type:"Feature",geometry:{type:"Point",coordinates:[q.attr("data-stadium-long"),q.attr("data-stadium-lat")]},properties:{title:q.attr("data-stadium-name"),"marker-size":"small","marker-color":"#ADADAD",club:l[p].getAttribute("data-club"),index:p}})}m.marker=h[0];a=L.mapbox.map("map","examples.map-20v6611k");e.children(".league-clubs").on("click",function(r){if(r.target.localName==="li"){m.name=$(r.target).attr("data-club")}else{if(r.target.localName==="img"){m.name=$(r.target.parentNode).attr("data-club")}}f()});o.on("click",function(r){var s=$(r.target.parentNode).attr("data-club");if(s!==undefined){m.name=s}f()});a.markerLayer.on("click",function(r){if(m.name===r.layer.feature.properties.club){a.setView(r.latlng,a.getZoom()+2)}else{m.name=r.layer.feature.properties.club;f()}});f()};var d=function(){$(m.node).removeClass("current");$(m.table).removeClass("current");$(m.overview).removeClass("current")};var j=function(){$(m.node).addClass("current");$(m.table).addClass("current");$(m.overview).addClass("current")};var b=function(){for(var p=0;p<k.length;p++){if(k[p].getAttribute("data-club")===m.name){m.node=k[p]}if(i[p].getAttribute("data-club")===m.name){m.table=i[p]}if(l[p].getAttribute("data-club")===m.name){m.overview=l[p]}if(h[p].properties.club===m.name){m.marker=h[p]}}};var c=function(){var p=6;if(a.getZoom()>=8){p=a.getZoom()}var q=$(m.overview).find(".stadium");a.setView([q.attr("data-stadium-lat"),q.attr("data-stadium-long")],p);g();m.marker.properties["old-color"]=m.marker.properties["marker-color"];m.marker.properties["marker-color"]="#000";a.markerLayer.setGeoJSON(h)};var g=function(q){for(var p=0;p<h.length;p++){h[p].properties["marker-color"]=h[p].properties["old-color"]||h[p].properties["marker-color"]}};var f=function(){d();b();j();c()};return{init:n}})();console.log("lol");"use strict";ds.comments=(function(){var a=function(){$("#comment-reveal").hide();$("#comment-form").click(function(){$("#comment-reveal").show()})};return{init:a}})();ds.comments.init();"use strict";ds.commentPost=(function(){var d=function(){$(".comment").each(function(e,f){var g=$(f);g.find(".comment-vote").unbind().click(function(h){a(h)});g.find(".comment-actions").unbind().click(function(h){b(h)})})};var a=function(h){if(h.target.localName=="i"){var f=h.target.getAttribute("data-vote");var g=h.target.parentNode.parentNode;var l=g.parentNode;var j=l.getAttribute("data-score");var i=g.querySelector(".comment-score");var k=g.getAttribute("data-vote-cast");if(k==="none"){if(f==="upvote"){j++}else{if(f==="downvote"){j--}}}else{if(k===f){if(f==="upvote"){j--}else{if(f==="downvote"){j++}}f="none"}else{if(k!=f){if(f==="upvote"){j=parseInt(j)+2}else{if(f==="downvote"){j-=2}}}}}g.setAttribute("data-vote-cast",f);l.setAttribute("data-score",j);i.innerHTML=j}};var b=function(g){var f=g.target.innerHTML;if(f==="reply"){g.target.innerHTML="--------";g.target.parentNode.parentNode.insertBefore(c(),g.target.parentNode.nextSibling)}else{if(f==="report"){console.log("report")}}};var c=function(){var g=document.createElement("form");g.className="reply-form";var e=document.createElement("textarea");e.setAttribute("placeholder","Enter your reply...");var h=document.createElement("div");h.className="submit-comment";var f=document.createElement("input");f.setAttribute("type","submit");f.setAttribute("value","Submit");h.appendChild(f);g.appendChild(e);g.appendChild(h);return g};return{init:d}})();ds.commentPost.init();"use strict";ds.nav=(function(){var g,f,a,h,l,m,c,d,k;var j=function(n){g=$(n.nav);k=$(".container");f=$("body").attr("data-page");g.find("li").each(function(o,p){if(p.getAttribute("data-page")===f){p.className="here"}});a=$(n.toggle);a.click(function(){i()});h=$(n.search);c=h.find("#search-input");m=h.find("#search-form");m.toggleClass("hidden");l=h.find("#search-toggle");l.click(function(){b()});h.find("#search-form-close").click(function(){b()});d=h.find("#search-results");d.toggleClass("hidden");c.on("keyup",function(o){d.toggleClass("hidden");if(o.keyCode===27){b()}})};var i=function(){a.toggleClass("show-x");g.toggleClass("nav-show");if(l.hasClass("hidden")){b()}};var b=function(){if(ds.width<768){k.toggleClass("overlay");l.toggleClass("hidden")}m.toggleClass("hidden");e()};var e=function(){if(!d.hasClass("hidden")){d.toggleClass("hidden")}};return{init:j}})();"use strict";"use strict";ds.users=(function(){var d;var f=function(){if(ds.localStorage.loggedIn===true){console.log("logged in");ds.users.loggedIn()}else{if(ds.localStorage.loggedIn===false){console.log("logged out")}}if($("#login-form-wrapper").length){d=$("#login-form");document.getElementById("login-form").addEventListener("keypress",function(g){if(g.keyCode===13){c()}},false);d.find('input[type="submit"]').click(function(g){g.preventDefault();c()})}};var c=function(g){ds.localStorage.loggedIn=true;ds.localStorage.username=d.find('input[type="text"]').val();ds.localStorage.bookmarks=["Tottenham Hotspur and US U17 Team Highlight 2013 IMG Invitational Tournament","Leones Negros is the Liga Ascenso MX Apertura 2013 Champion!","Mexico U-17 Coasts Past Argentina 3-0 En Route to the Final","Raúl “Potro” Gutiérrez sent out the same starting line-up from the victory over Italy to face Brazil.","Mexico’s Shaky Start in the U-17 World Cup"];ds.users.save()};var a=function(h){var g=$("#sign-in");g.find("a").attr("href","04-profile.html").html("Profile");$("#logout").click(function(i){ds.users.del()});console.log(ds.localStorage.bookmarks);$("#username").html(ds.localStorage.username)};var e=function(g){localStorage.setItem("ds",JSON.stringify(ds.localStorage))};var b=function(g){localStorage.removeItem("ds")};return{init:f,loggedIn:a,save:e,del:b}})();"use strict";